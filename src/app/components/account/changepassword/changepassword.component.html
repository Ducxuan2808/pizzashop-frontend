<app-header></app-header>

<div class="changepassword-page">
  <!-- Breadcrumb -->
  <div class="breadcrumb-container">
    <div class="container">
      <nav aria-label="breadcrumb">
        <ol class="breadcrumb">
          <li class="breadcrumb-item"><a routerLink="/">Trang chủ</a></li>
          <li class="breadcrumb-item"><a routerLink="/account">Tài khoản</a></li>
          <li class="breadcrumb-item active" aria-current="page">Đổi mật khẩu</li>
        </ol>
      </nav>
    </div>
  </div>

  <!-- Main Content -->
  <div class="container">
    <div class="row">
      <!-- Left Sidebar -->
      <div class="col-lg-3 col-md-4">
        <div class="account-sidebar">
          <div class="user-welcome">
            <span class="account-icon"><i class="fas fa-user-circle"></i></span>
            <div class="welcome-text">
              <p>TRANG TÀI KHOẢN</p>
              <p class="welcome-name">Xin chào, <span class="user-name">Xuan Nguyen</span>!</p>
            </div>
          </div>
          
          <div class="account-menu">
            <ul>
              <li><a routerLink="/profile"><i class="fas fa-user"></i> Thông tin tài khoản</a></li>
              <li><a routerLink="/myorder"><i class="fas fa-shopping-bag"></i> Đơn hàng của bạn</a></li>
              <li class="active"><a routerLink="/changepassword"><i class="fas fa-lock"></i> Đổi mật khẩu</a></li>
              <li><a href="#" class="logout"><i class="fas fa-sign-out-alt"></i> Đăng xuất</a></li>
            </ul>
          </div>
        </div>
      </div>
      
      <!-- Right Content -->
      <div class="col-lg-9 col-md-8">
        <div class="changepassword-container">
          <h2 class="form-title">Đổi mật khẩu</h2>
          
          <div *ngIf="passwordChangeSuccess" class="alert alert-success">
            Mật khẩu đã được cập nhật thành công!
          </div>
          
          <form [formGroup]="changePasswordForm" class="changepassword-form" (ngSubmit)="onSubmit()">
            <div class="form-group">
              <label for="current-password">Mật khẩu hiện tại <span class="required">*</span></label>
              <input 
                type="password" 
                id="current-password" 
                class="form-control" 
                formControlName="currentPassword"
                placeholder="Nhập mật khẩu hiện tại"
                [ngClass]="{'is-invalid': formSubmitted && currentPassword?.errors}">
              <div class="invalid-feedback" *ngIf="formSubmitted && currentPassword?.errors?.['required']">
                Vui lòng nhập mật khẩu hiện tại
              </div>
            </div>
            
            <div class="form-group">
              <label for="new-password">Mật khẩu mới <span class="required">*</span></label>
              <input 
                type="password" 
                id="new-password" 
                class="form-control" 
                formControlName="newPassword"
                placeholder="Nhập mật khẩu mới"
                [ngClass]="{'is-invalid': formSubmitted && newPassword?.errors}">
              <div class="invalid-feedback" *ngIf="formSubmitted && newPassword?.errors?.['required']">
                Vui lòng nhập mật khẩu mới
              </div>
              <div class="invalid-feedback" *ngIf="formSubmitted && newPassword?.errors?.['minlength']">
                Mật khẩu phải có ít nhất 8 ký tự
              </div>
              <div class="invalid-feedback" *ngIf="formSubmitted && newPassword?.errors?.['pattern']">
                Mật khẩu không đáp ứng yêu cầu bảo mật
              </div>
            </div>
            
            <div class="form-group">
              <label for="confirm-password">Xác nhận mật khẩu mới <span class="required">*</span></label>
              <input 
                type="password" 
                id="confirm-password" 
                class="form-control" 
                formControlName="confirmPassword"
                placeholder="Xác nhận mật khẩu mới"
                [ngClass]="{'is-invalid': formSubmitted && (confirmPassword?.errors || passwordMismatch)}">
              <div class="invalid-feedback" *ngIf="formSubmitted && confirmPassword?.errors?.['required']">
                Vui lòng xác nhận mật khẩu mới
              </div>
              <div class="invalid-feedback" *ngIf="formSubmitted && passwordMismatch">
                Mật khẩu xác nhận không khớp
              </div>
            </div>
            
            <div class="password-requirements">
              <p class="requirements-title">Yêu cầu mật khẩu:</p>
              <ul>
                <li [ngClass]="{'text-success': hasMinLength()}">Ít nhất 8 ký tự</li>
                <li [ngClass]="{'text-success': hasUpperLowerCase()}">Bao gồm ít nhất 1 chữ hoa, 1 chữ thường</li>
                <li [ngClass]="{'text-success': hasNumber()}">Bao gồm ít nhất 1 số</li>
                <li [ngClass]="{'text-success': hasNoWhitespace()}">Không chứa khoảng trắng</li>
              </ul>
            </div>
            
            <div class="form-actions">
              <button type="submit" class="btn-save">Lưu thay đổi</button>
              <a routerLink="/account" class="btn-cancel">Hủy</a>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>

<app-footer></app-footer>
