<header class="bg-white border-bottom">
    <!-- Top bar -->
    <div class="text-center py-1 small text-white" style="background-color: #ff914d;">
      Chào mừng bạn đến với PizZing!
    </div>
  
    <!-- Middle: Logo, search, hotline, buttons -->
    <div class="container py-2 d-flex flex-wrap align-items-center justify-content-center">
      <!-- Logo -->
      <div class="d-flex align-items-center mb-2 mb-lg-0">
        <a class="navbar-brand" href="#">
            <img src="../../assets/image/logo_dai1.jpeg" alt="Dola Food" class="logo" height="60px" style="border-radius: 10px !important;">
          </a>
      </div>
  
      <!-- Search bar -->
      <form class="flex-grow-1 mx-3" style="max-width: 400px;" (submit)="onSearch(); $event.preventDefault()">
        <div class="input-group">
          <input type="text" class="form-control"  name="searchKeyword" placeholder="Nhập tên sản phẩm…" />
          <button type="submit" class="btn btn-danger"><i class="fas fa-search"></i></button>
        </div>
      </form>
  
      <!-- Hotline, Cart, Buttons -->
      <div class="d-flex align-items-center gap-3">
        <!-- Hotline -->
        <div class="d-none d-lg-flex flex-column align-items-start me-2">
          <div class="d-flex align-items-center">
            <i class="fas fa-motorcycle text-danger me-2 fs-4"></i>
            <div>
              <div class="fw-bold text-dark">Giao hàng tận nơi</div>
              <div class="text-danger">1900 6750</div>
            </div>
          </div>
        </div>
  
      
        <!-- User icon với dropdown -->
    <div class="user-dropdown position-relative">
        <div>
            <button class="btn icon-btn rounded-circle position-relative hover-scale">
                <div class="icon-circle-bg">
                    <i class="fas fa-user text-warning fs-5"></i>
                </div>
            </button>
        </div>
        <div class="dropdown-menu user-dropdown-content shadow border-0">
            <a class="dropdown-item py-2" href="#">
                <i class="fas fa-sign-in-alt me-2 text-warning"></i> Đăng nhập
            </a>
            <a class="dropdown-item py-2" href="#">
                <i class="fas fa-user-plus me-2 text-warning"></i> Đăng ký
            </a>
            <a class="dropdown-item py-2" href="#">
                <i class="fas fa-heart me-2 text-warning"></i> Danh sách yêu thích (0)
            </a>
        </div>
     </div>
  
        <!-- Cart icon -->         
        <div class="cart-wrapper position-relative">
          <button class="btn icon-btn rounded-circle position-relative hover-scale">
            <div class="icon-circle-bg">
              <i class="fas fa-shopping-cart text-warning fs-5"></i>
            </div>
            <span *ngIf="cartItemCount > 0" class="badge bg-danger position-absolute badge-position p-1 rounded-circle">{{ cartItemCount }}</span>
          </button>
          
          <!-- Cart Popup -->
          <div class="cart-popup">
            <div class="cart-header">
              <h5 class="m-0">Giỏ hàng của bạn</h5>
            </div>
            
            <!-- Loading state -->
            <div *ngIf="isCartLoading" class="cart-loading">
              <div class="spinner-border text-warning" role="status">
                <span class="visually-hidden">Loading...</span>
              </div>
              <p>Đang tải giỏ hàng...</p>
            </div>
            
            <!-- Cart Items - Show this when cart has items -->
            <div *ngIf="!isCartLoading && cartItems.length > 0" class="cart-body">
              <div *ngFor="let item of cartItems" class="cart-item">
                <div class="item-image">
                  <img 
                    [src]="item.pizza?.url || 'assets/image/placeholder-pizza.jpg'" 
                    [alt]="item.pizza?.name || 'Pizza'"
                    (error)="handleImageError($event)"
                    class="pizza-img">
                </div>
                <div class="item-details">
                  <div class="item-name">{{ item.pizza?.name || 'Pizza' }}</div>
                  <div class="item-options">
                    {{ item.size?.size_name || '?' }} / {{ item.type?.base_name || '?' }}
                  </div>
                  <div class="item-price">{{ formatPrice(item.price) }}</div>
                </div>
                <div class="item-quantity">
                  <button class="quantity-btn minus" (click)="updateCartItemQuantity(item, -1)">
                    <i class="fas fa-minus"></i>
                  </button>
                  <input type="number" class="quantity-input" [(ngModel)]="item.quantity" min="1" max="50" readonly>
                  <button class="quantity-btn plus" (click)="updateCartItemQuantity(item, 1)">
                    <i class="fas fa-plus"></i>
                  </button>
                </div>
                <div class="item-delete">
                  <button class="delete-btn" (click)="removeCartItem(item)">
                    <i class="fas fa-trash-alt"></i> Xóa
                  </button>
                </div>
              </div>
            </div>
            
            <!-- Empty Cart - Show this when cart is empty -->
            <div *ngIf="!isCartLoading && cartItems.length === 0" class="cart-empty">
              <i class="fas fa-shopping-basket"></i>
              <p>Không có sản phẩm nào trong giỏ hàng</p>
            </div>
            
            <div class="cart-footer">
              <div class="cart-total">
                <span>Tổng tiền:</span>
                <span class="total-price">{{ formatPrice(cartTotal) }}</span>
              </div>
              <div class="cart-actions">
                <button *ngIf="cartItems.length > 0" class="btn-clear-cart" (click)="clearCart()">
                  <i class="fas fa-trash"></i> Xóa tất cả
                </button>
                <a [routerLink]="['/checkout']" class="btn-checkout" [class.disabled]="cartItems.length === 0">
                  Thanh toán
                </a>
              </div>
            </div>
          </div>
        </div>
  
        <!-- Buttons -->
        <button class="btn btn-danger rounded-pill px-3" routerLink="/pizzas">Đặt món online</button>
        <button class="btn btn-danger rounded-pill px-3" routerLink="/tablebooking">Đặt bàn</button>
      </div>
    </div>
  
    <!-- Bottom nav -->
    <nav class="navbar navbar-expand-lg navbar-dark" style="background-color: #ff914d;">
      <div class="container">
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#mainNavbar">
          <span class="navbar-toggler-icon"></span>
        </button>
  
        <div class="collapse navbar-collapse" id="mainNavbar">
          <ul class="navbar-nav mx-auto mb-2 mb-lg-0 justify-content-between">
            <li class="nav-item"><a class="nav-link" routerLink="/" routerLinkActive="active" [routerLinkActiveOptions]="{exact: true}">Trang chủ</a></li>
            <li class="nav-item"><a class="nav-link" routerLink="/gioithieu" routerLinkActive="active">Giới thiệu</a></li>
            <li class="nav-item"><a class="nav-link" routerLink="/pizzas" routerLinkActive="active">Sản phẩm</a></li>
            <li class="nav-item"><a class="nav-link" routerLink="/tintuc" routerLinkActive="active">Tin tức</a></li>
            <li class="nav-item"><a class="nav-link" routerLink="/lienhe" routerLinkActive="active">Liên hệ</a></li>
            <li class="nav-item"><a class="nav-link" routerLink="/question" routerLinkActive="active">Câu hỏi thường gặp</a></li>
            <li class="nav-item"><a class="nav-link" routerLink="/tablebooking" routerLinkActive="active">Đặt bàn</a></li>
          </ul>
        </div>
      </div>
    </nav>
  </header>
  